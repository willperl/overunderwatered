---
title: 1. Single file
layout: page
---

<script type="module">
  import { client } from "https://cdn.jsdelivr.net/npm/@gradio/client/+esm";

  async function predictBase64(base64Image) {
    const app = await client("smittens/overorunderwatered");
    
    // Extract only the base64 part (strip the "data:image/jpeg;base64," prefix)
    const base64Only = base64Image.split(',')[1]; 

    console.log('Input type:', typeof base64Only);
    console.log('Input preview:', base64Only.slice(0,30));

    try {
      const result = await app.predict([base64Only]);
      console.log('Prediction result:', result);

      const label = result.data[0].confidences[0].label;
      const conf = result.data[0].confidences[0].confidence;

      document.getElementById("results").innerHTML = `
        <img src="${base64Image}" width="300" />
        <p><strong>Prediction:</strong> ${label}</p>
        <p><strong>Confidence:</strong> ${conf.toFixed(2)}</p>
      `;
    } catch (err) {
      console.error('Prediction error:', err);
      document.getElementById("results").textContent = `Error: ${err.message || err}`;
    }
  }



  document.getElementById("photo").addEventListener("change", (e) => {
    const file = e.target.files[0];
    const reader = new FileReader();
    reader.onload = () => {
      predictBase64(reader.result);
    };
    reader.readAsDataURL(file);
  });
</script>

<input id="photo" type="file" />
<div id="results"></div>
