---
title: 1. Single file
layout: page
---

<input id="photo" type="file" />
<div id="results"></div>

<script>
	const API_URL = "https://smittens-overorunderwatered.hf.space";

	async function readImageAndSend() {
		const file = document.getElementById("photo").files[0];
		const reader = new FileReader();

		reader.onloadend = async () => {
			const base64Image = reader.result;

			const payload = {
				data: [base64Image],
				fn_index: 0  // This might vary. See note below.
			};

			const res = await fetch(`${API_URL}/queue/join`, {
				method: "POST",
				headers: {
					"Content-Type": "application/json"
				},
				body: JSON.stringify(payload)
			});

			const json = await res.json();
			console.log("Response:", json);

			document.getElementById("results").innerText = JSON.stringify(json, null, 2);
		};

		reader.readAsDataURL(file);
	}

	document.getElementById("photo").addEventListener("change", readImageAndSend);
</script>
