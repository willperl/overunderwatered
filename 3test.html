---
title: 3. Tester
layout: page
---

<script>
const fetch = require('node-fetch'); // Use `npm install node-fetch` if needed
const readline = require('readline');

async function callGradioAPI() {
	const imagePayload = {
		data: [
			{
				path: "https://raw.githubusercontent.com/gradio-app/gradio/main/test/test_files/bus.png",
				meta: {
					_type: "gradio.FileData"
				}
			}
		]
	};

	// Step 1: POST the request
	const response = await fetch("https://smittens-overorunderwatered.hf.space/gradio_api/call/predict", {
		method: "POST",
		headers: {
			"Content-Type": "application/json"
		},
		body: JSON.stringify(imagePayload)
	});

	const result = await response.json();
	const eventId = result.event_id;

	if (!eventId) {
		console.error("No event ID returned.");
		return;
	}

	console.log("Event ID:", eventId);

	// Step 2: Stream the prediction result
	const eventResponse = await fetch(`https://smittens-overorunderwatered.hf.space/gradio_api/call/predict/${eventId}`);

	const rl = readline.createInterface({
		input: eventResponse.body,
		crlfDelay: Infinity
	});

	console.log("Prediction stream output:");

	rl.on('line', (line) => {
		try {
			const parsed = JSON.parse(line);
			console.log(parsed);
		} catch (e) {
			console.warn("Non-JSON line or stream continuation:", line);
		}
	});
}

callGradioAPI().catch(console.error);

</script>
