---
title: 3. Tester
layout: page
---


	<h1>Upload an Image of Your Plant</h1>
	<form id="uploadForm">
		<input type="file" id="fileInput" accept="image/*" required>
		<button type="submit">Submit</button>
	</form>

	<div id="result" hidden></div>

	<script>
	async function callGradioAPI() {
		const imagePayload = {
			data: [
				{
					path: "https://raw.githubusercontent.com/gradio-app/gradio/main/test/test_files/bus.png",
					meta: {
						_type: "gradio.FileData"
					}
				}
			]
		};

		// Step 1: Send prediction request
		const response = await fetch("https://smittens-overorunderwatered.hf.space/gradio_api/call/predict", {
			method: "POST",
			headers: {
				"Content-Type": "application/json"
			},
			body: JSON.stringify(imagePayload)
		});

		const result = await response.json();
		const eventId = result.event_id;

		if (!eventId) {
			console.error("❌ No event ID returned");
			return;
		}

		console.log("✅ Event ID:", eventId);

		// Step 2: Get streamed result
		const resultResponse = await fetch(`https://smittens-overorunderwatered.hf.space/gradio_api/call/predict/${eventId}`);
		const rawText = await resultResponse.text();

		console.log("📥 Raw SSE response:\n" + rawText);

		// Debug: Print each line
		const lines = rawText.split("\n");
		console.log("🔍 Response lines:");
		lines.forEach((line, idx) => console.log(`${idx + 1}: ${line}`));

		// Extract the line that starts with "data:"
		const match = rawText.match(/^data:\s*(.*)$/m);

		if (match) {
			console.log("✅ Found data line:", match[0]);
			console.log("🔧 Attempting to parse JSON from:", match[1]);

			try {
				const parsed = JSON.parse(match[1]);
				console.log("🎉 Parsed result:", parsed);
			} catch (e) {
				console.error("❌ JSON parsing failed:", e.message);
			}
		} else {
			console.error("❌ No line starting with 'data:' was found");
		}
	}

	callGradioAPI();

	</script>
