---
title: 3. Tester
layout: page
---

<script>
async function callGradioAPI() {
	const imagePayload = {
		data: [
			{
				path: "https://raw.githubusercontent.com/gradio-app/gradio/main/test/test_files/bus.png",
				meta: {
					_type: "gradio.FileData"
				}
			}
		]
	};

	// Step 1: Send the request
	const response = await fetch("https://smittens-overorunderwatered.hf.space/gradio_api/call/predict", {
		method: "POST",
		headers: {
			"Content-Type": "application/json"
		},
		body: JSON.stringify(imagePayload)
	});

	const result = await response.json();
	const eventId = result.event_id;

	if (!eventId) {
		console.error("No event ID returned.");
		return;
	}

	console.log("Event ID:", eventId);

	// Step 2: Poll result after short delay
	const resultResponse = await fetch(`https://smittens-overorunderwatered.hf.space/gradio_api/call/predict/${eventId}`);
	const rawText = await resultResponse.text();

	console.log("Raw Response:", rawText);

	// Extract the line that starts with "data:"
	const match = rawText.match(/^data:\s*(.*)$/m);
	if (match && match[1]) {
		try {
			const parsed = JSON.parse(match[1]);
			console.log("Parsed result:", parsed);
		} catch (e) {
			console.error("JSON parsing failed:", e);
		}
	} else {
		console.error("Could not find data line in response.");
	}

}

callGradioAPI();
</script>
